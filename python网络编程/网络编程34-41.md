# 网络编程34-41

1. 验证客户端合法性（自动化开发）

1.1 为什么要验证客户端合法性

- 红色的是非法客户端，如果给它连接上server，可以非法获取到server端的数据。

![29](F:\python_learn\python网络编程\pic\29.png)

1.2 验证客户端合法性过程

- client与server相连接后，给client发送一个随机字符串
- 结果一致就是合法客户端， 不一致就是非法客户端

![30](F:\python_learn\python网络编程\pic\30.png)

![31](F:\python_learn\python网络编程\pic\31.png)

- 随机字符串

```python
import os
# 得到一个32位的随机字节串
print(os.urandom(32))
```

1.3 编写程序

---

2.  加密算法

2.1 hmac

```python
import hmac
import os

secret_key = b"wesley"
randseq = os.urandom(32)

hmac = hmac.new(secret_key, randseq)
hmac_code = hmac.digest()
print(hmac_code)                   # 得到一个字节串， 不用解码编码了


b'~\xba9\x7f\xea7\x8c\xec\xbfv\x04\xff\x10Fb\x8b'
```

3. socketserver模块

3.1 介绍

![32](F:\python_learn\python网络编程\pic\32.png)

3.2 作用

- 可以 一个服务端给多个客户端同时服务